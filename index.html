<!-- 

TODO: 
- deploy 

-->

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html>
  <head>
    <title>ITPoooooooooooooogle</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script src="giggle.js"></script>
    <script src="sammy-latest.min.js"></script>
    <link rel="stylesheet" href="blueprint/screen.css" />

    <script>
    // MAYBE LATER:
    // Sources = {
    //   'itpedia' : {
    //     "name": "itpedia",
    //     "q" : "itpedia.nyu.edu"
    //   },
    //   "nyu" : {
    //     "name" : "itp.nyu.edu",
    //     "q" : "itp.nyu.edu"
    //   }
    // }
    
    var app = $.sammy(function() {

      this.get('#/search/:q', function() {
        $('#q').val(this.params['q']);
        $("#result-label").html("\"" + this.params['q'] + "\"");
        $("#result-label").show();
        
        $("#itpedia .results").empty();
        $("#nyu .results").empty();

        $(".searching").show();
        
        Giggle.q($("#q").val() + " site:itpedia.nyu.edu", function(results){
          $("#itpedia .searching").hide();

          for(i = 0; i < results.length; i++){
            $("#itpedia .results").append('<li class="'+ ((i%2) ? "even" : "odd") + '"><a href="'+results[i].url+'">'+results[i].title+'</a></li>');
          }

          $("#itpedia .more-link").attr("href", Giggle.googleUrl);
        });
      
        Giggle.q($("#q").val() + " site:itp.nyu.edu", function(results){
          $("#nyu .searching").hide();

          for(i = 0; i < results.length; i++){
            
            $("#nyu .results").append('<li class="'+ ((i%2) ? "even" : "odd") + '"><a href="'+results[i].url+'">'+results[i].title+'</a></li>');
          }
          $("#nyu .more-link").attr("href", Giggle.googleUrl);
        });
      });
    
    });
    
    $(function() {
      
      app.run();
      $("#search").submit(function(){
        var before = window.location;
        window.location.hash = "#/search/" + encodeURI($("#q").val());
        return false;
      });
    });
     
    </script>
    <style>
    
    .searching {
      color: #ccc;
      font-style: italic;
      display: hidden;
    }
    
    .border {
      border-bottom: 1px solid #ddd;
      margin-bottom: 5px;
      padding-bottom: 5px;
      border-right: none;
    }
    
    body {
      margin-top: 10px;
    }
    
    h1 {
      text-align: center;
    }
    
    form input, label{
      font-size: 20px;
    }
    
    form {
      text-align:center;
    }
    
    h3 {
      color: #aaa;
    }
    
    ul {
      list-style-type: none;
      padding-left: 5px;
    }
    
    li.odd {
      background-color: #eee;
    }
    
    li {
      margin-bottom: 5px;
      font-size: 14px;
      padding: 2px;
      padding-left: 5px;
    }
    
    .more-link {
      background-color: #1111CC;
      color: #fff;
      padding: 5px;
      font-weight: bold;
    }
    
    .more-link:hover{
      color: #fff;
    }
  
  
    #result-label {
      display: hidden;
      color: #0f7f4f;
      font-style:italic;
    }
    
    </style>
  </head>
  <body>
    <div class="container">
      <div class="column span-23 border" id="header">
        <h1><span style="color:#1111CC">ITP</span><span style="color:#CC0000">o</span><span style="color:#DDDD00">o</span><span style="color:#1111CC">g</span><span style="color:#44dd44">l</span><span style="color:#DDDD00">e</span></h1>
      </div>
    
      <div class="column span-23 border">
        <form id="search" action="#/search">
          <input id="q" type="text" />
          <input type="submit" value="search" />
        </form>
      </div>
      
      <div class="column span-23">

        
        <h2>Results <span id="result-label"></span></h2>
        <div id="itpedia" class="prepend-1 column span-10 ">
          
                  
          <h3 class="border">ITPedia</h3>
          <p class="searching">searching...</p>
          <ul class="results"></ul>
          <a class="more-link column span-10" href="#">More from Google</a>
        </div>
        <div id="nyu" class="prepend-1 column span-10">
          <h3 class="border">itp.nyu.edu</h3>
          <p class="searching">searching...</p>
          <ul class="results"></ul>
          <a class="more-link column span-10" href="#">More from Google</a>
        
        </div>
      </div>
    </div>
  </body>
</html>
